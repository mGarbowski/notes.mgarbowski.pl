<!doctype html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>wyklad-06</title>
    <link rel="stylesheet" href="../style.css">

    <!--    Load mathjax from cdn to render latex equations-->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<div class="prev-next-links">
    
    <div class="index-links-prev">
        <a href="wyklad-05.html">Poprzedni: wyklad-05.html</a>
    </div>
    

    
    <div class="index-links-next">
        <a href="wyklad-07.html">Następny: wyklad-07.html</a>
    </div>
    
    <div class="return-link">
        <a href="..">Powrót</a>
    </div>
</div>
<div class="container">
    <div class="index-links-wrapper">
        <h2>Systemy komputerowe w sterowaniu i pomiarach</h2>
        <div class="index-links">
            <ul>
                
                <li><a href="kolokwium-01.html">kolokwium-01.html</a></li>
                
                <li><a href="kolokwium-02.html">kolokwium-02.html</a></li>
                
                <li><a href="wyklad-01.html">wyklad-01.html</a></li>
                
                <li><a href="wyklad-02.html">wyklad-02.html</a></li>
                
                <li><a href="wyklad-03.html">wyklad-03.html</a></li>
                
                <li><a href="wyklad-04.html">wyklad-04.html</a></li>
                
                <li><a href="wyklad-05.html">wyklad-05.html</a></li>
                
                <li><a href="wyklad-06.html">wyklad-06.html</a></li>
                
                <li><a href="wyklad-07.html">wyklad-07.html</a></li>
                
                <li><a href="wyklad-08.html">wyklad-08.html</a></li>
                
                <li><a href="wyklad-09.html">wyklad-09.html</a></li>
                
                <li><a href="wyklad-10.html">wyklad-10.html</a></li>
                
                <li><a href="wyklad-11.html">wyklad-11.html</a></li>
                
                <li><a href="wyklad-12.html">wyklad-12.html</a></li>
                
            </ul>
        </div>
    </div>
    <div class="content-wrapper">
        <main>
            <p>Jeśli strona była dla Ciebie pomocna, możesz wesprzeć mnie w jej utrzymaniu na <a href="https://buycoffee.to/mgarbowski">buycoffee.to/mgarbowski</a></p>
            <h1 id="proces-projektowy-2024-03-25">Proces projektowy
(2024-03-25)</h1>
<h2 id="realizacja-systemu-wbudowanego">Realizacja systemu
wbudowanego</h2>
<ol type="1">
<li>analiza wymagań</li>
<li>projektowanie systemu</li>
<li>projekt wstępny (oprogramowania)</li>
<li>projekt szczegółowy (oprogramowania)</li>
<li>…</li>
</ol>
<p>Chodzi o to żeby system i spełniał wymagania i był odpowiednio tani.
Problemem jest to że zaczynamy nie wiedząc do końca jaka będzie
implementacja Na początkowych etapach ustala się co będzie realizowane
programowo a co sprzętowo</p>
<p>Przykład sterowania osprzętem sali wykładowej (rozwijany ekran,
oświetlenie główne sterowane płynnie, sterowanie pomocnicze
włączone/wyłączone)</p>
<p>Generalnie PWM jest preferowany nad użycie przetwornika
analogowo-cyfrowego (jest tańszy, bardziej odporny na zakłócenia)</p>
<h2 id="analiza-wymagań">Analiza wymagań</h2>
<p>Analizujemy jakie będą wejścia i wyjścia mikrokontrolera</p>
<p>Obsługa stanów nienormalnych * jednocześnie sygnał do zwinięcia i
rozwinięcia ekranu - wyłączenie silnika * brak sygnalizacji zwinięcia /
rozwinięcia ekranu po 12s - wyłączenie silnika</p>
<h3 id="lista-zdarzeń">Lista zdarzeń</h3>
<ol type="1">
<li>Rozwiń ekran</li>
<li>Zwiń ekran</li>
<li>…</li>
</ol>
<p>Ustalamy reakcję systemu na zdarzenia - tabelka, reakcja typowa,
alternatywna, brak reakcji</p>
<p>Model zachowania można wyrazić jako maszynę stanów (automat
skończony). Z odpowiedzi opisanych w tabeli może nie być jednoznacznie
ustalony</p>
<h3 id="ograniczenia-czasowe">Ograniczenia czasowe</h3>
<p>Może wynikać z fizycznych właściwości instalacji lub z interakcji z
człowiekiem</p>
<p>Np. * Czas reakcji na sygnał rozwinięcia lub zwinięcia przycisku *
szybkość rzowijania ekranu * odległość czujnika od końca ekranu * droga
hamowania ekranu * zwłoka wyłączenia silnika * Czas reakcji na
naciśnięcie przycisku</p>
<h2 id="projektowanie-systemu">Projektowanie systemu</h2>
<ul>
<li>co można realizować programowo a co sprzętowo</li>
</ul>
<h3 id="projekt-sprzętu">Projekt sprzętu</h3>
<ul>
<li>Wybór mikrokontrolera</li>
<li>Projekt sprzęgu procesowego - połączenie instalacji z
mikrokontrolerem
<ul>
<li>np. optoizolacja wejść i wyjść, zasilanie, wzmacniacz</li>
</ul></li>
<li>Projekt płytki
<ul>
<li>złącza</li>
<li>rozmieszczenie elementów</li>
<li>projekt druku</li>
</ul></li>
</ul>
<p>Mikrokontroler CISC - jedna instrukcja nie przekłada się na jeden
takt zegara</p>
<h2 id="projekt-wstępny">Projekt wstępny</h2>
<p>Dodanie do tabeli reakcji na zdarzenia ograniczeń czasowych Można
podzielić je na grupy, które będą przypisane do zadań</p>
<p>Problem - jednocześnie trzeba reagować na zdarzenia i generować falę
PWM (o zadanym wypełnieniu)</p>
<p>Do generowania PWM o częstotliwość 1kHz można wykorzystać timer i
rejestr (licznik), który ulega przepełnieniu co odpowiednią do
częstotliowści zegara</p>
<h3 id="szeregowanie-zadań">Szeregowanie zadań</h3>
<ul>
<li>Problematyczne bo jeszcze nie znamy implementacji</li>
<li>Określona długość ścieżki w kodzie
<ul>
<li>liczba instrukcji C w danej ścieżce (tylko wybranej gałęzi
if-a)</li>
</ul></li>
<li>Trzeba policzyć liczbę instrukcji asemblerowych w wynikowym kodzie i
uwzględnić maksymalny czas wykonywania (ile taktów zegara na instrukcję,
jakie taktowanie zegara)</li>
<li>Część zadań wykonywanych w pętli głównej, część w przerwaniach</li>
</ul>
<p>warunek z inkrementacją i przepełnieniem - spowolnienie wykonywania
instrukcji w ifie 256 razy</p>
<p>to jak rejestruje się procedurę obsługi przerwania zależy od
platformy</p>
<p>W przykładowym kodzie jest hazard jeśli przerwanie wystąpi na końcu
impulsu sygnału PWM Można zabezpieczyć się przez wyłączenie przerwań (EA
= 0, EA=1)</p>

        </main>
    </div>
    <div class="table-of-contents">
        <nav id="TOC" role="doc-toc">
<ul>
<li><a href="#proces-projektowy-2024-03-25">Proces projektowy
(2024-03-25)</a>
<ul>
<li><a href="#realizacja-systemu-wbudowanego">Realizacja systemu
wbudowanego</a></li>
<li><a href="#analiza-wymagań">Analiza wymagań</a>
<ul>
<li><a href="#lista-zdarzeń">Lista zdarzeń</a></li>
<li><a href="#ograniczenia-czasowe">Ograniczenia czasowe</a></li>
</ul></li>
<li><a href="#projektowanie-systemu">Projektowanie systemu</a>
<ul>
<li><a href="#projekt-sprzętu">Projekt sprzętu</a></li>
</ul></li>
<li><a href="#projekt-wstępny">Projekt wstępny</a>
<ul>
<li><a href="#szeregowanie-zadań">Szeregowanie zadań</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>
</body>
</html>