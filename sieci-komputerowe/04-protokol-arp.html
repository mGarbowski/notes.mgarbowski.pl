<!doctype html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>04-protokol-arp</title>
    <link rel="stylesheet" href="../style.css">

    <!--    Load mathjax from cdn to render latex equations-->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body>
<div class="prev-next-links">
    
    <div class="index-links-prev">
        <a href="03-adresowanie-w-sieci.html">Poprzedni: 03-adresowanie-w-sieci.html</a>
    </div>
    

    
    <div class="index-links-next">
        <a href="05-protokol-ip.html">Następny: 05-protokol-ip.html</a>
    </div>
    
    <div class="return-link">
        <a href="..">Powrót</a>
    </div>
</div>
<div class="container">
    <div class="index-links-wrapper">
        <h2>Sieci komputerowe</h2>
        <div class="index-links">
            <ul>
                
                <li><a href="00-organizacja.html">00-organizacja.html</a></li>
                
                <li><a href="01-stosy-protokolow.html">01-stosy-protokolow.html</a></li>
                
                <li><a href="02-organizacje-standaryzacyjne.html">02-organizacje-standaryzacyjne.html</a></li>
                
                <li><a href="03-adresowanie-w-sieci.html">03-adresowanie-w-sieci.html</a></li>
                
                <li><a href="04-protokol-arp.html">04-protokol-arp.html</a></li>
                
                <li><a href="05-protokol-ip.html">05-protokol-ip.html</a></li>
                
                <li><a href="06-protokol-icmp.html">06-protokol-icmp.html</a></li>
                
                <li><a href="07-protokol-dhcp.html">07-protokol-dhcp.html</a></li>
                
                <li><a href="08-routing.html">08-routing.html</a></li>
                
                <li><a href="09-protokol-rip.html">09-protokol-rip.html</a></li>
                
                <li><a href="10-ethernet.html">10-ethernet.html</a></li>
                
                <li><a href="11-vlan.html">11-vlan.html</a></li>
                
                <li><a href="12-protokoly-udp-tcp.html">12-protokoly-udp-tcp.html</a></li>
                
                <li><a href="13-protokol-dns.html">13-protokol-dns.html</a></li>
                
                <li><a href="14-vpn.html">14-vpn.html</a></li>
                
                <li><a href="15-laczenie-sieci.html">15-laczenie-sieci.html</a></li>
                
                <li><a href="16-multicast.html">16-multicast.html</a></li>
                
                <li><a href="17-sieci-bezprzewodowe.html">17-sieci-bezprzewodowe.html</a></li>
                
                <li><a href="18-polaczenia-modemowe.html">18-polaczenia-modemowe.html</a></li>
                
                <li><a href="powtorzenie-do-kolokwium-01.html">powtorzenie-do-kolokwium-01.html</a></li>
                
                <li><a href="powtorzenie-do-kolokwium-02.html">powtorzenie-do-kolokwium-02.html</a></li>
                
            </ul>
        </div>
    </div>
    <div class="content-wrapper">
        <main>
            <p>Jeśli strona była dla Ciebie pomocna, możesz wesprzeć mnie w jej utrzymaniu na <a href="https://buycoffee.to/mgarbowski">buycoffee.to/mgarbowski</a></p>
            <h1 id="address-resolution-protocol-arp">Address Resolution Protocol
(ARP)</h1>
<p>Służy do znalezienia jaki adres MAC odpowiada adresowi IP</p>
<p>Zapytanie z adresem IP jest wysyłane w trybie broadcast - do
wszystkich komputerów sieci lokalnej (jest do tego specjalna wartość
adresu MAC). Komputer posługujący się danym adresem IP zwraca żadającemu
odpowiedź ze swoim adresem MAC. Adresy są cache’owane żeby uniknąć
powielania zapytań (typowo na 2 minuty).</p>
<p>Routery nie przepuszczają pakietów z adresami broadcastowymi. Żeby
poznać adres MAC trzeba wysłać żądanie do routera.</p>
<p>Karta sieciowa domyślnie odrzuca ramki nie adresowane na jej adres
sprzętowy. Kartę sieciową można przełączyć w tryb w którym odbiera
wszystkie ramki na potrzeby debuggowania (sniffer). Przełączniki
sieciowe (switch) dostarczają ramki na podstawie adresu sprzętowego.</p>
<p>Konieczność podawania adresu MAC wynika głównie ze względów
historycznych, najpierw były sieci lokalne.</p>
<h2 id="pakiet">Pakiet</h2>
<ul>
<li>MAC header</li>
<li>hardware type</li>
<li>protocol type</li>
<li>hlen - długość pól hardware address</li>
<li>plen - długość pól protocol address</li>
<li>opcode</li>
<li>sender hardware address</li>
<li>sender protocol address</li>
<li>receiver hardware address</li>
<li>receiver protocol address</li>
</ul>
<p>Polecenie <code>arp</code> w Linuxie</p>
<h2 id="rozpoznawanie-sąsiedztwa">Rozpoznawanie sąsiedztwa</h2>
<p>Problem rozpoznawania sąsiedztwa - komputer musi podjąć decyzję czy
skierować zapytanie do komputera w sieci lokalnej (sąsiadującego) czy do
routera. Klasy adresu IP mają rozwiązywać ten problem</p>
<ol type="1">
<li>Komputer wysyła żądanie z docelowym adresem IP i adresem MAC swojego
routera do tego routera</li>
<li>Router usuwa nagłówek MAC i tworzy nowy z własnym adresem jako
źródło i adresem następnego routera jako odbiorcy.</li>
<li>Ostatni router pozyskuje adres MAC docelowego komputera w sieci
lokalnej i odsyła odpowiedź</li>
</ol>
<p>Nagłówki MAC są wymieniane przy każdym skoku, nagłówek IP pozostaje w
zasadzie be zmian. IP opisuje trasę pakietu jako całość, od pierwotnego
nadawcy do docelowego odbiorcy. Nagłówek MAC opisuje aktualny etap
trasy.</p>

        </main>
    </div>
    <div class="table-of-contents">
        <nav id="TOC" role="doc-toc">
<ul>
<li><a href="#address-resolution-protocol-arp">Address Resolution
Protocol (ARP)</a>
<ul>
<li><a href="#pakiet">Pakiet</a></li>
<li><a href="#rozpoznawanie-sąsiedztwa">Rozpoznawanie
sąsiedztwa</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>
</body>
</html>